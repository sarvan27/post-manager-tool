"use strict";(self.webpackChunkpost_manager_frontend=self.webpackChunkpost_manager_frontend||[]).push([[121],{7121:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var i=n(1413),r=n(1614),o=n(7047),l=n(9434),s=n(3353),d=n(2791),u=n(9439),a=n(4084),c=n(8163),f=n(6757),h=n(3466),p=n(2167),m=n(184),x=(0,a.D)({matchFrom:"start",stringify:function(e){return e.title}}),v=function(){var e=(0,l.I0)(),t=(0,d.useState)(null),n=(0,u.Z)(t,2),r=n[0],o=n[1],a=(0,l.v9)((function(e){return e.postReducer.allPosts}));return(0,m.jsx)("div",{style:{minHeight:64},children:(0,m.jsx)(c.Z,{"aria-label":"Search for title",value:r,onChange:function(t,n){return function(t){(null!==t&&void 0!==t&&t.id||null===t)&&o(t),e((0,s.F8)(t))}(n)},filterOptions:function(e,t){var n=x(e,t),i=t.inputValue,r=null===e||void 0===e?void 0:e.some((function(e){return i===e.title}));return""===i||r||n.push({inputValue:i,title:'Add "'.concat(i,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"posts-search-autocomplete-create",options:a||[],getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.title)||""},renderOption:function(e,t){return(0,m.jsx)("li",(0,i.Z)((0,i.Z)({},e),{},{children:t.title}))},sx:{width:300,float:"right"},freeSolo:!0,margin:"dense",size:"small",renderInput:function(e){return(0,m.jsx)(f.Z,(0,i.Z)((0,i.Z)({},e),{},{margin:"dense",size:"small",fullWidth:!0,InputProps:(0,i.Z)((0,i.Z)({},e.InputProps),{},{startAdornment:(0,m.jsx)(h.Z,{sx:{marginRight:0},position:"start",children:(0,m.jsx)(p.Z,{})})}),placeholder:"Search for title"}))}})})},j=n(8820),Z=n(5397),g=n(7621),b=n(9585),y=n(3044),C=n(4247),I=n(3400),P=n(890),w=n(9504),S=n(427),k=function(e){var t=e.userId,n=e.id,i=e.title,r=e.body,o=(0,l.I0)();return(0,m.jsxs)(g.Z,{id:"post-item-".concat(n),sx:{marginBottom:2},children:[(0,m.jsx)(b.Z,{avatar:(0,m.jsx)(y.Z,{sx:{width:32,height:32,fontSize:14,bgcolor:S.Z[700]},"aria-label":"user-id",children:t}),action:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(C.Z,{title:"Edit post",placement:"top",children:(0,m.jsx)(I.Z,{"aria-label":"edit",size:"medium",color:"primary",onClick:function(){o((0,s.Hl)({userId:t,id:n,title:i,body:r}))},children:(0,m.jsx)(j.Z,{})})}),(0,m.jsx)(C.Z,{title:"Delete post",placement:"top",children:(0,m.jsx)(I.Z,{"aria-label":"edit",size:"medium",color:"error",onClick:function(){o((0,s.rd)({userId:t,id:n,title:i,body:r}))},children:(0,m.jsx)(Z.Z,{})})})]}),title:(0,m.jsx)(P.Z,{variant:"h6",component:"div",children:i})}),(0,m.jsx)(w.Z,{sx:{paddingTop:0},children:(0,m.jsx)(P.Z,{children:r})})]})},W=(0,d.memo)(k),z=n(5289),E=n(5661),F=n(9157),R=n(7482),T=n(7123),D=n(4294),B=function(){var e=(0,l.I0)(),t=(0,d.useState)(""),n=(0,u.Z)(t,2),r=n[0],o=n[1],a=(0,d.useState)(!1),c=(0,u.Z)(a,2),h=c[0],x=c[1],v=(0,d.useState)({}),j=(0,u.Z)(v,2),Z=j[0],g=j[1],b=(0,l.v9)((function(e){return e.postReducer.preEditPost})),y=(0,l.v9)((function(e){return e.postReducer.addNewPost})),C=(0,l.v9)((function(e){return e.postReducer.editPost}));(0,d.useEffect)((function(){o("")}),[b]),console.log("addNew",y),(0,d.useEffect)((function(){g((0,i.Z)((0,i.Z)({},y),{},{userId:"",body:""}))}),[y]),(0,d.useEffect)((function(){g(C)}),[C]);var I=(0,d.useCallback)((function(e,t){var n=(0,i.Z)({},Z);n[e]=t,g(n)})),P=function(){b&&e((0,s.Zd)(!1)),Z.id&&e((0,s.F_)()),"object"===typeof y&&"title"in y&&e((0,s.x4)())},w=function(e,t){var n=(0,d.useState)(e),i=(0,u.Z)(n,2),r=i[0],o=i[1];return(0,d.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r}(r,1e3);return(0,d.useEffect)((function(){x(!1),e((0,s.Ik)(w))}),[w]),(0,m.jsxs)(z.Z,{fullWidth:!0,maxWidth:"sm",open:Boolean(b||"object"===typeof y&&"title"in y||(null===C||void 0===C?void 0:C.id)),onClose:P,children:[(0,m.jsx)(E.Z,{children:b?"Search a title":null!==C&&void 0!==C&&C.id?"Update post #".concat(null===C||void 0===C?void 0:C.id):"Create new post"}),(0,m.jsx)(F.Z,{children:(0,m.jsx)("form",{id:"form-add-or-update-post",onSubmit:function(t){t.preventDefault(),Z.id?e((0,s.CP)(Z)):e((0,s.ed)(Z))},children:b?(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)(f.Z,{value:r,onChange:function(e){return t=e.target.value,x(!0),void o(t);var t},InputProps:{startAdornment:(0,m.jsx)(p.Z,{htmlColor:"gray",sx:{marginRight:1}}),inputProps:{"data-testid":"add-or-edit-post-search"}},size:"small",autoFocus:!0,margin:"dense",placeholder:"Search for exact title to edit",type:"text",fullWidth:!0,required:!0}),(0,m.jsx)(R.Z,{sx:{position:"absolute",bottom:"4px",right:"2px",width:"99%",visibility:h?"visible":"hidden"}})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{value:null!==Z&&void 0!==Z&&Z.userId?Z.userId:"",onChange:function(e){return I("userId",e.target.value)},InputProps:{inputProps:{min:1}},size:"small",autoFocus:!0,margin:"dense",label:"User ID",type:"number",fullWidth:!0,required:!0}),(0,m.jsx)(f.Z,{value:null!==Z&&void 0!==Z&&Z.title?Z.title:"",onChange:function(e){return I("title",e.target.value)},size:"small",margin:"normal",label:"Title",type:"text",fullWidth:!0,multiline:!0,required:!0}),(0,m.jsx)(f.Z,{value:null!==Z&&void 0!==Z&&Z.body?Z.body:"",onChange:function(e){return I("body",e.target.value)},margin:"normal",size:"small",label:"Body",type:"text",fullWidth:!0,multiline:!0,rows:4,required:!0})]})})}),(0,m.jsxs)(T.Z,{children:[(0,m.jsx)(D.Z,{onClick:P,children:"Cancel"}),!b&&(0,m.jsx)(D.Z,{type:"submit",form:"form-add-or-update-post",color:"primary",variant:"contained",children:null!==C&&void 0!==C&&C.id?"Update":"Create"})]})]})},q=n(1691),A=function(){var e=(0,l.I0)(),t=(0,d.useState)(""),n=(0,u.Z)(t,2),i=n[0],r=n[1],o=(0,l.v9)((function(e){return e.postReducer.deletePost}));(0,d.useEffect)((function(){r("")}),[o]);var a=function(){e((0,s.LW)())};return(0,m.jsxs)(z.Z,{fullWidth:!0,maxWidth:"sm",open:Boolean(null===o||void 0===o?void 0:o.id),onClose:a,children:[(0,m.jsx)(E.Z,{children:"Are you sure you want to delete the below post ?"}),(0,m.jsxs)(F.Z,{children:[(0,m.jsxs)(q.Z,{children:[(0,m.jsx)("strong",{children:"User ID:"}),"\xa0",null===o||void 0===o?void 0:o.userId,(0,m.jsx)("br",{}),(0,m.jsx)("strong",{children:"Title:"}),"\xa0",null===o||void 0===o?void 0:o.title,(0,m.jsx)("br",{}),(0,m.jsx)("strong",{children:"Body:"}),"\xa0",null===o||void 0===o?void 0:o.body]}),(0,m.jsx)("form",{id:"form-delete-post",onSubmit:function(t){t.preventDefault(),e((0,s.M8)(i,o.id))},children:(0,m.jsx)(f.Z,{value:i,onChange:function(e){return r(e.target.value)},margin:"normal",size:"small",label:"Feedback",type:"text",fullWidth:!0,multiline:!0,rows:4,required:!0,helperText:"Please provide valuable feedback to delete this post!"})})]}),(0,m.jsxs)(T.Z,{children:[(0,m.jsx)(D.Z,{onClick:a,children:"Cancel"}),(0,m.jsx)(D.Z,{type:"submit",form:"form-delete-post",color:"primary",variant:"contained",children:"Delete"})]})]})};var O=function(){var e=(0,l.I0)(),t=(0,l.v9)((function(e){return e.postReducer.allPostsLoading})),n=(0,l.v9)((function(e){return e.postReducer.viewablePosts}));return(0,d.useEffect)((function(){e((0,s.T6)())}),[e]),(0,m.jsx)(r.Z,{maxWidth:"md",style:{marginTop:64},children:(0,m.jsxs)("div",{style:{paddingTop:8},children:[(0,m.jsx)(v,{}),t?(0,m.jsx)(m.Fragment,{children:Array(10).fill(0).map((function(e,t){return(0,m.jsx)(o.Z,{height:150,width:"100%",style:{transform:"scale(1,0.9)"}},t)}))}):(0,m.jsx)("div",{children:(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,t){return(0,m.jsx)(W,(0,i.Z)({},e),t)}))}),(0,m.jsx)(B,{}),(0,m.jsx)(A,{})]})})}}}]);
//# sourceMappingURL=121.cc2cd82c.chunk.js.map